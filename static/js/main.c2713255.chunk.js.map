{"version":3,"sources":["fadedgold/layout/SideBar.tsx","fadedgold/component/text.tsx","fadedgold/layout/Content.tsx","fadedgold/pages/swde/SWDE.tsx","fadedgold/pages/swd3e/editor.ts","fadedgold/redux/hook.ts","fadedgold/pages/swd3e/gameSlice.ts","fadedgold/pages/swd3e/metaSlice.ts","fadedgold/pages/swd3e/partySlice.ts","fadedgold/component/BasicCommandBar.tsx","fadedgold/component/NumericTextField.tsx","fadedgold/pages/swd3e/GameProgress.tsx","fadedgold/component/Card.tsx","fadedgold/pages/swd3e/CharacterCard.tsx","fadedgold/pages/swd3e/Party.tsx","fadedgold/pages/swd3e/SWD3E.tsx","fadedgold/util.ts","fadedgold/routingConfig.tsx","fadedgold/App.tsx","reportWebVitals.ts","fadedgold/i18n.ts","fadedgold/pages/swde/gameSlice.ts","fadedgold/pages/swde/partySlice.ts","fadedgold/pages/swde/slice.ts","fadedgold/pages/swd3e/slice.ts","fadedgold/redux/store.ts","index.tsx","fadedgold/theme.ts"],"names":["navStyles","root","width","boxSizing","border","SideBar","props","routingItems","navigate","useNavigate","t","useTranslation","keyPrefix","navGroups","links","Object","entries","map","key","item","name","url","Nav","selectedKey","groups","styles","onLinkClick","e","undefined","preventDefault","Heading1","Text","variant","block","Heading2","Heading3","stackTokens","childrenGap","stackStyles","display","HeadingElement","title","children","useEffect","document","Stack","tokens","Content","defaultRoutes","path","element","to","routes","concat","SWDE","EXPERIENCE_ADDRESS","HEALTH_ADDRESS","MANA_ADDRESS","VITALITY_ADDRESS","MAX_HEALTH_ADDRESS","MAX_MANA_ADDRESS","MAX_VITALITY_ADDRESS","STRENGTH_ADDRESS","DURABILITY_ADDRESS","INTELLIGENCE_ADDRESS","LEVEL_ADDRESS","METAL_RESISTANCE_ADDRESS","WOOD_RESISTANCE_ADDRESS","WATER_RESISTANCE_ADDRESS","FIRE_RESISTANCE_ADDRESS","loadGame","data","money","getUint32","loadCharacter","offset","experience","health","getUint16","mana","vitality","maxHealth","maxMana","maxVitality","strength","durability","intelligence","speed","level","getUint8","metalResistance","woodResistance","waterResistance","fireResistance","earthResistance","loadParty","chen","yu","tuoba","chang","overwriteCharacter","stats","setUint32","setUint16","setUint8","overwriteGameInfo","buffer","info","DataView","game","overwriteGame","party","overwriteParty","useAppDispatch","useDispatch","useAppSelector","useSelector","gameSlice","createSlice","initialState","reducers","replaced","state","action","payload","moneyUpdated","actions","metaSlice","filename","filenameUpdated","emptyCharacter","partySlice","attributeUpdated","id","attribute","value","handleChange","target","files","targetFile","reader","FileReader","onload","result","ArrayBuffer","onUpload","console","error","readAsArrayBuffer","BasicCommandBar","uploadDisabled","downloadDisabled","uploadRef","React","createRef","items","text","iconProps","iconName","disabled","onClick","current","click","onRender","ref","style","type","onChange","onDownload","CommandBar","NumericTextField","label","maxValue","textFieldsStyles","fieldGroup","onChangeWrapped","newValue","TextField","raw","length","parseInt","isNaN","onKeyDown","GameProgress","dispatch","swd3e","Card","palette","useTheme","useState","isMouseInside","setIsMouseInside","padding","borderWidth","borderStyle","borderColor","themePrimary","neutralQuaternary","onMouseEnter","onMouseLeave","statesStackTokens","CharacterCard","renderedItems","attr","horizontalAlign","horizontal","wrap","partyStackTokens","Party","characters","keys","LOCAL_STORAGE_KEY","SWD3E","meta","editor","b64Buffer","btoa","Uint8Array","reduce","byte","String","fromCharCode","base64EncodeBuffer","localStorage","setItem","metaActions","gameActions","partyActions","b64","getItem","from","atob","split","c","charCodeAt","base64DecodeBuffer","blob","Blob","href","URL","createObjectURL","link","createElement","download","swde","sidebarStackItemStyles","contentStackItemStyles","App","fallback","Item","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","i18n","use","Backend","initReactI18next","init","fallbackLng","debug","interpolation","escapeValue","backend","loadPath","process","_","fu","wenjin","puppet","stone","reducer","combineReducers","gameReducer","partyReducer","metaReducer","store","configureStore","swdeReducer","swd3eReducer","initializeIcons","ReactDOM","render","StrictMode","ThemeProvider","theme","getElementById"],"mappings":"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","file":"static/js/main.c2713255.chunk.js","sourcesContent":["import React from \"react\";\nimport { INavLink, INavLinkGroup, INavStyles, Nav } from \"@fluentui/react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { RoutingItems } from \"fadedgold/routingConfig\";\nimport { useTranslation } from \"react-i18next\";\n\nconst navStyles: Partial<INavStyles> = {\n  root: {\n    width: 208,\n    boxSizing: \"border-box\",\n    border: \"1px solid #eee\",\n  },\n};\n\ninterface SideBarProps {\n  routingItems: RoutingItems;\n}\n\nexport const SideBar = (props: SideBarProps) => {\n  const { routingItems } = props;\n  const navigate = useNavigate();\n  const { t } = useTranslation(\"translation\", { keyPrefix: \"menu\" });\n\n  const handleClick = (e?: React.MouseEvent<HTMLElement>, item?: INavLink) => {\n    if (e === undefined || item === undefined) {\n      return;\n    }\n\n    e.preventDefault();\n    navigate(item.url);\n  };\n\n  const links: INavLink[] = Object.entries(routingItems).map(([key, item]) => ({\n    name: t(key),\n    url: item.url,\n    key: key,\n  }));\n\n  const navGroups: INavLinkGroup[] = [{ links: links }];\n\n  return (\n    <Nav\n      selectedKey=\"\"\n      groups={navGroups}\n      styles={navStyles}\n      onLinkClick={handleClick}\n    />\n  );\n};\n","import { ITextProps, Text } from \"@fluentui/react\";\n\nexport const Heading1 = (props: ITextProps) => {\n  return <Text {...props} variant={\"mega\"} block />;\n};\n\nexport const Heading2 = (props: ITextProps) => {\n  return <Text {...props} variant={\"xxLarge\"} block />;\n};\n\nexport const Heading3 = (props: ITextProps) => {\n  return <Text {...props} variant={\"xLarge\"} block />;\n};\n\nexport const Paragraph = (props: ITextProps) => {\n  return <Text {...props} block />;\n};\n","import { RoutingItems } from \"fadedgold/routingConfig\";\nimport { Navigate, Route, Routes } from \"react-router-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { Heading1 } from \"fadedgold/component/text\";\nimport { IStackStyles, IStackTokens, Stack } from \"@fluentui/react\";\nimport React, { useEffect } from \"react\";\n\ninterface ContentProps {\n  routingItems: RoutingItems;\n}\n\nconst stackTokens: IStackTokens = {\n  childrenGap: 10,\n};\n\nconst stackStyles: IStackStyles = {\n  root: {\n    display: \"block\",\n  },\n};\n\ninterface HeadingElementProps {\n  title: string;\n  children: React.ReactNode;\n}\n\nconst HeadingElement = (props: HeadingElementProps) => {\n  const { title, children } = props;\n\n  useEffect(() => {\n    document.title = title;\n  }, [title]);\n\n  return (\n    <Stack tokens={stackTokens} styles={stackStyles}>\n      <Heading1>{title}</Heading1>\n      {children}\n    </Stack>\n  );\n};\n\nexport const Content = (props: ContentProps) => {\n  const { routingItems } = props;\n  const { t } = useTranslation(\"translation\", { keyPrefix: \"menu\" });\n\n  const defaultRoutes = [\n    <Route key=\"home\" path=\"/\" element={<Navigate to=\"/games/swd3e\" />} />,\n  ];\n\n  const routes = Object.entries(routingItems).map(([key, item]) => {\n    const element = (\n      <HeadingElement title={t(key)}>{item.element()}</HeadingElement>\n    );\n    return <Route key={key} path={item.url} element={element} />;\n  });\n\n  return <Routes>{defaultRoutes.concat(routes)}</Routes>;\n};\n","export function SWDE() {\n  return (\n    <>\n      <div>TBD</div>\n    </>\n  );\n}\n","import { Character, PartyState } from \"fadedgold/pages/swd3e/partySlice\";\nimport { GameState } from \"fadedgold/pages/swd3e/gameSlice\";\n\nconst MONEY_ADDRESS = 0x128fe;\n\nconst EXPERIENCE_ADDRESS = 0x129fe;\n\nconst HEALTH_ADDRESS = EXPERIENCE_ADDRESS + 4;\nconst MANA_ADDRESS = HEALTH_ADDRESS + 2;\nconst VITALITY_ADDRESS = MANA_ADDRESS + 2;\nconst MAX_HEALTH_ADDRESS = VITALITY_ADDRESS + 2;\nconst MAX_MANA_ADDRESS = MAX_HEALTH_ADDRESS + 2;\nconst MAX_VITALITY_ADDRESS = MAX_MANA_ADDRESS + 2;\n\nconst STRENGTH_ADDRESS = MAX_VITALITY_ADDRESS + 2;\nconst DURABILITY_ADDRESS = STRENGTH_ADDRESS + 2;\nconst INTELLIGENCE_ADDRESS = DURABILITY_ADDRESS + 2;\nconst SPEED_ADDRESS = INTELLIGENCE_ADDRESS + 2;\n\nconst LEVEL_ADDRESS = 0x12a2a;\nconst METAL_RESISTANCE_ADDRESS = LEVEL_ADDRESS + 1;\nconst WOOD_RESISTANCE_ADDRESS = METAL_RESISTANCE_ADDRESS + 1;\nconst WATER_RESISTANCE_ADDRESS = WOOD_RESISTANCE_ADDRESS + 1;\nconst FIRE_RESISTANCE_ADDRESS = WATER_RESISTANCE_ADDRESS + 1;\nconst EARTH_RESISTANCE_ADDRESS = FIRE_RESISTANCE_ADDRESS + 1;\n\ninterface GameInfo {\n  game: GameState;\n  party: PartyState;\n}\n\nconst loadGame = (data: DataView): GameState => {\n  return {\n    money: data.getUint32(MONEY_ADDRESS, true),\n  };\n};\n\nconst loadCharacter = (data: DataView, offset: number): Character => {\n  return {\n    experience: data.getUint32(EXPERIENCE_ADDRESS + offset, true),\n\n    health: data.getUint16(HEALTH_ADDRESS + offset, true),\n    mana: data.getUint16(MANA_ADDRESS + offset, true),\n    vitality: data.getUint16(VITALITY_ADDRESS + offset, true),\n    maxHealth: data.getUint16(MAX_HEALTH_ADDRESS + offset, true),\n    maxMana: data.getUint16(MAX_MANA_ADDRESS + offset, true),\n    maxVitality: data.getUint16(MAX_VITALITY_ADDRESS + offset, true),\n\n    strength: data.getUint16(STRENGTH_ADDRESS + offset, true),\n    durability: data.getUint16(DURABILITY_ADDRESS + offset, true),\n    intelligence: data.getUint16(INTELLIGENCE_ADDRESS + offset, true),\n    speed: data.getUint16(SPEED_ADDRESS + offset, true),\n\n    level: data.getUint8(LEVEL_ADDRESS + offset),\n    metalResistance: data.getUint8(METAL_RESISTANCE_ADDRESS + offset),\n    woodResistance: data.getUint8(WOOD_RESISTANCE_ADDRESS + offset),\n    waterResistance: data.getUint8(WATER_RESISTANCE_ADDRESS + offset),\n    fireResistance: data.getUint8(FIRE_RESISTANCE_ADDRESS + offset),\n    earthResistance: data.getUint8(EARTH_RESISTANCE_ADDRESS + offset),\n  };\n};\n\nconst loadParty = (data: DataView): PartyState => {\n  return {\n    chen: loadCharacter(data, 0),\n    yu: loadCharacter(data, 0x3c),\n    tuoba: loadCharacter(data, 0x3c * 2),\n    chang: loadCharacter(data, 0x3c * 3),\n  };\n};\n\nexport const loadGameInfo = (buffer: ArrayBuffer): GameInfo => {\n  const data = new DataView(buffer);\n\n  return {\n    game: loadGame(data),\n    party: loadParty(data),\n  };\n};\n\nconst overwriteGame = (data: DataView, game: GameState) => {\n  data.setUint32(MONEY_ADDRESS, game.money, true);\n};\n\nconst overwriteCharacter = (\n  data: DataView,\n  offset: number,\n  stats: Character\n) => {\n  data.setUint32(EXPERIENCE_ADDRESS + offset, stats.experience, true);\n\n  data.setUint16(HEALTH_ADDRESS + offset, stats.health, true);\n  data.setUint16(MANA_ADDRESS + offset, stats.mana, true);\n  data.setUint16(VITALITY_ADDRESS + offset, stats.vitality, true);\n  data.setUint16(MAX_HEALTH_ADDRESS + offset, stats.maxHealth, true);\n  data.setUint16(MAX_MANA_ADDRESS + offset, stats.maxMana, true);\n  data.setUint16(MAX_VITALITY_ADDRESS + offset, stats.maxVitality, true);\n\n  data.setUint16(STRENGTH_ADDRESS + offset, stats.strength, true);\n  data.setUint16(DURABILITY_ADDRESS + offset, stats.durability, true);\n  data.setUint16(INTELLIGENCE_ADDRESS + offset, stats.intelligence, true);\n  data.setUint16(SPEED_ADDRESS + offset, stats.speed, true);\n\n  data.setUint8(LEVEL_ADDRESS + offset, stats.level);\n  data.setUint8(METAL_RESISTANCE_ADDRESS + offset, stats.metalResistance);\n  data.setUint8(WOOD_RESISTANCE_ADDRESS + offset, stats.woodResistance);\n  data.setUint8(WATER_RESISTANCE_ADDRESS + offset, stats.waterResistance);\n  data.setUint8(FIRE_RESISTANCE_ADDRESS + offset, stats.fireResistance);\n  data.setUint8(EARTH_RESISTANCE_ADDRESS + offset, stats.earthResistance);\n};\n\nconst overwriteParty = (data: DataView, party: PartyState) => {\n  overwriteCharacter(data, 0, party.chen);\n  overwriteCharacter(data, 0x3c, party.yu);\n  overwriteCharacter(data, 0x3c * 2, party.tuoba);\n  overwriteCharacter(data, 0x3c * 3, party.chang);\n};\n\nexport const overwriteGameInfo = (buffer: ArrayBuffer, info: GameInfo) => {\n  const data = new DataView(buffer);\n\n  overwriteGame(data, info.game);\n  overwriteParty(data, info.party);\n};\n","import { TypedUseSelectorHook, useDispatch, useSelector } from \"react-redux\";\nimport { AppDispatch, RootState } from \"fadedgold/redux/store\";\n\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\nexport interface GameState {\n  money: number;\n}\n\nconst initialState: GameState = {\n  money: 0,\n};\n\nexport const gameSlice = createSlice({\n  name: \"swd3e/game\",\n  initialState,\n  reducers: {\n    replaced: (state, action: PayloadAction<GameState>) => {\n      return action.payload;\n    },\n    moneyUpdated: (state, action: PayloadAction<number>) => {\n      state.money = action.payload;\n    },\n  },\n});\n\nexport const actions = gameSlice.actions;\nexport default gameSlice.reducer;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\nexport interface MetaState {\n  filename: string | null;\n}\n\nconst initialState: MetaState = {\n  filename: null,\n};\n\nexport const metaSlice = createSlice({\n  name: \"swd3e/meta\",\n  initialState,\n  reducers: {\n    filenameUpdated: (state, action: PayloadAction<string>) => {\n      state.filename = action.payload;\n    },\n  },\n});\n\nexport const actions = metaSlice.actions;\nexport default metaSlice.reducer;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\nexport interface Character {\n  experience: number;\n\n  health: number;\n  mana: number;\n  vitality: number;\n  maxHealth: number;\n  maxMana: number;\n  maxVitality: number;\n\n  strength: number;\n  durability: number;\n  intelligence: number;\n  speed: number;\n\n  level: number;\n  metalResistance: number;\n  woodResistance: number;\n  waterResistance: number;\n  fireResistance: number;\n  earthResistance: number;\n}\n\nexport type CharacterAttribute = keyof Character;\n\nconst emptyCharacter: Character = {\n  durability: 0,\n  earthResistance: 0,\n  experience: 0,\n  fireResistance: 0,\n  health: 0,\n  intelligence: 0,\n  level: 0,\n  mana: 0,\n  maxHealth: 0,\n  maxMana: 0,\n  maxVitality: 0,\n  metalResistance: 0,\n  speed: 0,\n  strength: 0,\n  vitality: 0,\n  waterResistance: 0,\n  woodResistance: 0,\n};\n\nconst characterIds = [\"chen\", \"yu\", \"tuoba\", \"chang\"] as const;\nexport type CharacterId = typeof characterIds[number];\nexport type PartyState = Record<CharacterId, Character>;\n\nconst initialState: PartyState = {\n  chen: { ...emptyCharacter },\n  yu: { ...emptyCharacter },\n  tuoba: { ...emptyCharacter },\n  chang: { ...emptyCharacter },\n};\n\ninterface CharacterPayload {\n  id: CharacterId;\n  attribute: CharacterAttribute;\n  value: number;\n}\n\nexport const partySlice = createSlice({\n  name: \"swd3e/party\",\n  initialState,\n  reducers: {\n    replaced: (state, action: PayloadAction<PartyState>) => {\n      return action.payload;\n    },\n    attributeUpdated: (state, action: PayloadAction<CharacterPayload>) => {\n      const { id, attribute, value } = action.payload;\n      state[id][attribute] = value;\n    },\n  },\n});\n\nexport const actions = partySlice.actions;\nexport default partySlice.reducer;\n","import { CommandBar, ICommandBarItemProps } from \"@fluentui/react\";\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface BasiCommandBarProps {\n  onUpload: (filename: string, buffer: ArrayBuffer) => void;\n  uploadDisabled?: boolean;\n  onDownload: () => void;\n  downloadDisabled?: boolean;\n}\n\nconst handleChange =\n  (props: BasiCommandBarProps) => (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (e.target.files === null) {\n      console.error(\"event.target.files is null\");\n      return;\n    }\n\n    const targetFile = e.target.files[0];\n    const reader = new FileReader();\n\n    reader.onload = (e) => {\n      if (e.target === null) {\n        console.error(\"ProgressEvent.target is null\");\n        return;\n      }\n\n      const buffer = e.target.result;\n      if (!(buffer instanceof ArrayBuffer)) {\n        console.error(\"buffer is not an instance of ArrayBuffer\");\n        return;\n      }\n\n      props.onUpload(targetFile.name, buffer);\n    };\n\n    reader.readAsArrayBuffer(targetFile);\n  };\n\nexport const BasicCommandBar = (props: BasiCommandBarProps) => {\n  const { t } = useTranslation(\"translation\", { keyPrefix: \"commandBar\" });\n  const { uploadDisabled, downloadDisabled } = props;\n  const uploadRef = React.createRef<HTMLInputElement>();\n\n  const handleUpload = () => {\n    if (uploadRef.current) {\n      uploadRef.current.click();\n    }\n  };\n\n  const items: ICommandBarItemProps[] = [\n    {\n      key: \"upload\",\n      text: t(\"upload\"),\n      iconProps: { iconName: \"Upload\" },\n      disabled: uploadDisabled,\n      onClick: handleUpload,\n    },\n    {\n      key: \"upload-dummy\",\n      onRender: () => (\n        <input\n          ref={uploadRef}\n          style={{ display: \"none\" }}\n          type=\"file\"\n          onChange={handleChange(props)}\n        />\n      ),\n    },\n    {\n      key: \"download\",\n      text: t(\"download\"),\n      iconProps: { iconName: \"Download\" },\n      disabled: downloadDisabled,\n      onClick: props.onDownload,\n    },\n  ];\n\n  return <CommandBar items={items} />;\n};\n","import { ITextFieldStyles, TextField } from \"@fluentui/react\";\nimport React from \"react\";\n\ninterface NumericTextFieldProps {\n  label: string;\n  value: number;\n  maxValue?: number;\n  onChange: (newValue: number) => void;\n  width?: number;\n}\n\nconst defaultWidth: number = 80;\n\nexport const NumericTextField = (props: NumericTextFieldProps) => {\n  const { label, value, maxValue, onChange, width } = props;\n\n  const textFieldsStyles: Partial<ITextFieldStyles> = {\n    fieldGroup: {\n      width: width !== undefined ? width : defaultWidth,\n    },\n  };\n\n  const onChangeWrapped = (newValue: number) => {\n    const maxV = maxValue !== undefined ? maxValue : 65535;\n    if (newValue >= 0 && newValue <= maxV) {\n      onChange(newValue);\n    }\n  };\n\n  const handleChange = (\n    e: React.FormEvent<HTMLInputElement | HTMLTextAreaElement>,\n    raw?: string\n  ) => {\n    if (raw === undefined) {\n      return;\n    }\n\n    if (raw.length === 0) {\n      onChangeWrapped(0);\n      return;\n    }\n\n    const newValue = parseInt(raw);\n    if (isNaN(newValue)) {\n      return;\n    }\n\n    onChangeWrapped(newValue);\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent<HTMLInputElement>) => {\n    if (e.key === \"ArrowDown\") {\n      onChangeWrapped(value - 1);\n    } else if (e.key === \"ArrowUp\") {\n      onChangeWrapped(value + 1);\n    }\n  };\n\n  return (\n    <TextField\n      label={label}\n      value={`${value}`}\n      onChange={handleChange}\n      onKeyDown={handleKeyPress}\n      styles={textFieldsStyles}\n    />\n  );\n};\n","import { Heading2 } from \"fadedgold/component/text\";\nimport { useTranslation } from \"react-i18next\";\nimport { useAppDispatch, useAppSelector } from \"fadedgold/redux/hook\";\nimport { actions } from \"fadedgold/pages/swd3e/gameSlice\";\nimport { NumericTextField } from \"fadedgold/component/NumericTextField\";\n\nexport const GameProgress = () => {\n  const { t } = useTranslation(\"swd3e\", { keyPrefix: \"game\" });\n  const dispatch = useAppDispatch();\n  const { money } = useAppSelector((state) => state.swd3e.game);\n\n  const handleMoneyChange = (value: number) => {\n    dispatch(actions.moneyUpdated(value));\n  };\n\n  return (\n    <div>\n      <Heading2>{t(\"title\")}</Heading2>\n      <NumericTextField\n        label={t(\"money\")}\n        value={money}\n        maxValue={0xffffffff}\n        width={100}\n        onChange={handleMoneyChange}\n      />\n    </div>\n  );\n};\n","import React, { useState } from \"react\";\nimport { useTheme } from \"@fluentui/react\";\n\ninterface CardProps {\n  width: number;\n  children: React.ReactNode;\n}\n\nexport const Card = (props: CardProps) => {\n  const { palette } = useTheme();\n  const [isMouseInside, setIsMouseInside] = useState(false);\n\n  const styles: React.CSSProperties = {\n    width: props.width,\n    padding: \"20px\",\n    borderWidth: \"2px\",\n    borderStyle: \"solid\",\n    borderColor: isMouseInside\n      ? palette.themePrimary\n      : palette.neutralQuaternary,\n  };\n\n  const handleMouseEnter = () => {\n    setIsMouseInside(true);\n  };\n\n  const handleMouseLeave = () => {\n    setIsMouseInside(false);\n  };\n\n  return (\n    <div\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={handleMouseLeave}\n      style={styles}\n    >\n      {props.children}\n    </div>\n  );\n};\n","import {\n  actions,\n  CharacterAttribute,\n  CharacterId,\n} from \"fadedgold/pages/swd3e/partySlice\";\nimport { useAppDispatch, useAppSelector } from \"fadedgold/redux/hook\";\nimport { Heading3 } from \"fadedgold/component/text\";\nimport { useTranslation } from \"react-i18next\";\nimport { NumericTextField } from \"fadedgold/component/NumericTextField\";\nimport { IStackTokens, Stack } from \"@fluentui/react\";\nimport { Card } from \"fadedgold/component/Card\";\n\ninterface CharacterCardProps {\n  id: CharacterId;\n}\n\nconst statesStackTokens: IStackTokens = {\n  childrenGap: 5,\n};\n\nexport const CharacterCard = (props: CharacterCardProps) => {\n  const { id } = props;\n  const { t } = useTranslation(\"swd3e\", { keyPrefix: \"party\" });\n  const state = useAppSelector((state) => state.swd3e.party[id]);\n  const dispatch = useAppDispatch();\n\n  const items: Array<{\n    attr: CharacterAttribute;\n    maxValue: number;\n    width?: number;\n  }> = [\n    { attr: \"level\", maxValue: 0xff, width: 60 },\n    { attr: \"experience\", maxValue: 0xffffffff, width: 95 },\n    { attr: \"health\", maxValue: 0xffff },\n    { attr: \"maxHealth\", maxValue: 0xffff },\n    { attr: \"mana\", maxValue: 0xffff },\n    { attr: \"maxMana\", maxValue: 0xffff },\n    { attr: \"vitality\", maxValue: 0xffff },\n    { attr: \"maxVitality\", maxValue: 0xffff },\n    { attr: \"strength\", maxValue: 0xffff },\n    { attr: \"durability\", maxValue: 0xffff },\n    { attr: \"intelligence\", maxValue: 0xffff },\n    { attr: \"speed\", maxValue: 0xffff },\n    { attr: \"metalResistance\", maxValue: 0xff, width: 65 },\n    { attr: \"woodResistance\", maxValue: 0xff, width: 65 },\n    { attr: \"waterResistance\", maxValue: 0xff, width: 65 },\n    { attr: \"fireResistance\", maxValue: 0xff, width: 65 },\n    { attr: \"earthResistance\", maxValue: 0xff, width: 65 },\n  ];\n\n  const renderedItems = items.map((item) => (\n    <NumericTextField\n      key={item.attr}\n      label={t(`states.${item.attr}`)}\n      value={state[item.attr]}\n      maxValue={item.maxValue}\n      width={item.width}\n      onChange={(value) => {\n        dispatch(actions.attributeUpdated({ id, attribute: item.attr, value }));\n      }}\n    />\n  ));\n\n  return (\n    <Card width={350}>\n      <Heading3>{t(`names.${id}`)}</Heading3>\n      <Stack\n        tokens={statesStackTokens}\n        horizontalAlign=\"center\"\n        horizontal\n        wrap\n      >\n        {renderedItems}\n      </Stack>\n    </Card>\n  );\n};\n","import { Heading2 } from \"fadedgold/component/text\";\nimport { useTranslation } from \"react-i18next\";\nimport { useAppSelector } from \"fadedgold/redux/hook\";\nimport { CharacterCard } from \"fadedgold/pages/swd3e/CharacterCard\";\nimport { CharacterId } from \"fadedgold/pages/swd3e/partySlice\";\nimport { IStackTokens, Stack } from \"@fluentui/react\";\n\nconst partyStackTokens: IStackTokens = {\n  childrenGap: 16,\n};\n\nexport const Party = () => {\n  const { t } = useTranslation(\"swd3e\", { keyPrefix: \"party\" });\n  const { party } = useAppSelector((state) => state.swd3e);\n\n  const characters = (Object.keys(party) as Array<CharacterId>).map((id) => (\n    <CharacterCard key={id} id={id} />\n  ));\n\n  return (\n    <div>\n      <Heading2>{t(\"title\")}</Heading2>\n      <Stack tokens={partyStackTokens} horizontal wrap>\n        {characters}\n      </Stack>\n    </div>\n  );\n};\n","import React from \"react\";\nimport * as editor from \"fadedgold/pages/swd3e/editor\";\nimport { useAppDispatch, useAppSelector } from \"fadedgold/redux/hook\";\nimport { actions as gameActions } from \"fadedgold/pages/swd3e/gameSlice\";\nimport { actions as metaActions } from \"fadedgold/pages/swd3e/metaSlice\";\nimport { actions as partyActions } from \"fadedgold/pages/swd3e/partySlice\";\nimport { BasicCommandBar } from \"fadedgold/component/BasicCommandBar\";\nimport { base64DecodeBuffer, base64EncodeBuffer } from \"fadedgold/util\";\nimport { GameProgress } from \"fadedgold/pages/swd3e/GameProgress\";\nimport { Party } from \"fadedgold/pages/swd3e/Party\";\n\nconst LOCAL_STORAGE_KEY = \"swd3e/save\";\n\nexport const SWD3E = () => {\n  const dispatch = useAppDispatch();\n  const { filename } = useAppSelector((state) => state.swd3e.meta);\n  const { game, party } = useAppSelector((state) => state.swd3e);\n\n  const handleUpload = (filename: string, buffer: ArrayBuffer) => {\n    const info = editor.loadGameInfo(buffer);\n\n    const b64Buffer = base64EncodeBuffer(buffer);\n    localStorage.setItem(LOCAL_STORAGE_KEY, b64Buffer);\n\n    dispatch(metaActions.filenameUpdated(filename));\n    dispatch(gameActions.replaced(info.game));\n    dispatch(partyActions.replaced(info.party));\n  };\n\n  const handleDownload = () => {\n    if (filename === null) {\n      return;\n    }\n\n    const b64 = localStorage.getItem(LOCAL_STORAGE_KEY);\n    if (b64 === null) {\n      console.error(\"b64 blob is null\");\n      return;\n    }\n\n    const buffer = base64DecodeBuffer(b64);\n    if (buffer === null) {\n      console.error(\"buffer is null\");\n    }\n\n    editor.overwriteGameInfo(buffer, { game, party });\n\n    const blob = new Blob([new Uint8Array(buffer)]);\n    const href = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.href = href;\n    link.download = filename;\n    link.click();\n  };\n\n  return (\n    <>\n      <BasicCommandBar\n        onUpload={handleUpload}\n        onDownload={handleDownload}\n        downloadDisabled={filename === null}\n      />\n      <GameProgress />\n      <Party />\n    </>\n  );\n};\n","export const base64EncodeBuffer = (buffer: ArrayBuffer): string =>\n  btoa(\n    new Uint8Array(buffer).reduce(\n      (data, byte) => data + String.fromCharCode(byte),\n      \"\"\n    )\n  );\n\nexport const base64DecodeBuffer = (b64: string): ArrayBuffer => {\n  const byteArray = Uint8Array.from(\n    atob(b64)\n      .split(\"\")\n      .map((c) => c.charCodeAt(0))\n  );\n\n  return byteArray.buffer;\n};\n","import { SWDE } from \"fadedgold/pages/swde/SWDE\";\nimport { SWD3E } from \"fadedgold/pages/swd3e/SWD3E\";\nimport { ReactElement } from \"react\";\n\nexport type RoutingItems = { [key: string]: RoutingItem };\n\ninterface RoutingItem {\n  url: string;\n  element: () => ReactElement;\n}\n\nexport const routingItems: { [key: string]: RoutingItem } = {\n  swde: {\n    url: \"/games/swde\",\n    element: () => <SWDE />,\n  },\n  swd3e: {\n    url: \"/games/swd3e\",\n    element: () => <SWD3E />,\n  },\n};\n","import React, { Suspense } from \"react\";\nimport { IStackItemStyles, Stack } from \"@fluentui/react\";\nimport { SideBar } from \"fadedgold/layout/SideBar\";\nimport { Content } from \"fadedgold/layout/Content\";\nimport { routingItems } from \"fadedgold/routingConfig\";\n\nconst sidebarStackItemStyles: IStackItemStyles = {\n  root: {\n    padding: 10,\n  },\n};\n\nconst contentStackItemStyles: IStackItemStyles = {\n  root: {\n    padding: 10,\n  },\n};\n\nfunction App() {\n  return (\n    <Suspense fallback={<div>Loading</div>}>\n      <Stack horizontal>\n        <Stack.Item styles={sidebarStackItemStyles}>\n          <SideBar routingItems={routingItems} />\n        </Stack.Item>\n        <Stack.Item styles={contentStackItemStyles}>\n          <Content routingItems={routingItems} />\n        </Stack.Item>\n      </Stack>\n    </Suspense>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import i18n from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport Backend from \"i18next-http-backend\";\n\ni18n\n  .use(Backend)\n  .use(initReactI18next)\n  .init({\n    fallbackLng: \"tw\",\n    debug: true,\n    interpolation: {\n      escapeValue: false,\n    },\n    backend: {\n      loadPath: `${process.env.PUBLIC_URL}/locales/{{lng}}/{{ns}}.json`,\n    },\n  })\n  .then((_) => console.debug(\"Finished i18n initialization\"));\n\nexport default i18n;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\ninterface GameState {\n  money: number;\n}\n\nconst initialState: GameState = {\n  money: 0,\n};\n\nexport const gameSlice = createSlice({\n  name: \"swde/game\",\n  initialState,\n  reducers: {\n    moneyUpdated: (state, action: PayloadAction<number>) => {\n      state.money = action.payload;\n    },\n  },\n});\n\nexport const { moneyUpdated } = gameSlice.actions;\nexport default gameSlice.reducer;\n","import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\n\ninterface Character {\n  experience: number;\n\n  health: number;\n  maxHealth: number;\n  vitality: number;\n  maxVitality: number;\n  mana: number;\n  maxMana: number;\n}\n\ntype CharacterAttribute = keyof Character;\n\nconst emptyCharacter: Character = {\n  experience: 0,\n  health: 0,\n  mana: 0,\n  maxHealth: 0,\n  maxMana: 0,\n  maxVitality: 0,\n  vitality: 0,\n};\n\nconst characterIds = [\"fu\", \"wenjin\", \"puppet\", \"stone\"] as const;\ntype CharacterId = typeof characterIds[number];\ntype PartyState = Record<CharacterId, Character>;\n\nconst initialState: PartyState = {\n  fu: { ...emptyCharacter },\n  wenjin: { ...emptyCharacter },\n  puppet: { ...emptyCharacter },\n  stone: { ...emptyCharacter },\n};\n\ninterface CharacterPayload {\n  id: CharacterId;\n  attribute: CharacterAttribute;\n  value: number;\n}\n\nexport const partySlice = createSlice({\n  name: \"swde/party\",\n  initialState,\n  reducers: {\n    attributeUpdated: (state, action: PayloadAction<CharacterPayload>) => {\n      const { id, attribute, value } = action.payload;\n      state[id][attribute] = value;\n    },\n  },\n});\n\nexport const { attributeUpdated } = partySlice.actions;\nexport default partySlice.reducer;\n","import { combineReducers } from \"@reduxjs/toolkit\";\nimport gameReducer from \"fadedgold/pages/swde/gameSlice\";\nimport partyReducer from \"fadedgold/pages/swde/partySlice\";\n\nconst reducer = combineReducers({\n  game: gameReducer,\n  party: partyReducer,\n});\n\nexport default reducer;\n","import { combineReducers } from \"@reduxjs/toolkit\";\nimport gameReducer from \"fadedgold/pages/swd3e/gameSlice\";\nimport metaReducer from \"fadedgold/pages/swd3e/metaSlice\";\nimport partyReducer from \"fadedgold/pages/swd3e/partySlice\";\n\nconst reducer = combineReducers({\n  game: gameReducer,\n  meta: metaReducer,\n  party: partyReducer,\n});\n\nexport default reducer;\n","import { configureStore } from \"@reduxjs/toolkit\";\nimport swdeReducer from \"fadedgold/pages/swde/slice\";\nimport swd3eReducer from \"fadedgold/pages/swd3e/slice\";\n\nexport const store = configureStore({\n  reducer: {\n    swde: swdeReducer,\n    swd3e: swd3eReducer,\n  },\n});\n\nexport type AppDispatch = typeof store.dispatch;\nexport type RootState = ReturnType<typeof store.getState>;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"fadedgold/App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { initializeIcons } from \"@fluentui/react/lib/Icons\";\nimport { HashRouter as Router } from \"react-router-dom\";\nimport \"fadedgold/i18n\";\nimport { store } from \"fadedgold/redux/store\";\nimport { Provider } from \"react-redux\";\nimport { ThemeProvider } from \"@fluentui/react\";\nimport { theme } from \"fadedgold/theme\";\n\ninitializeIcons();\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <ThemeProvider theme={theme}>\n        <Router>\n          <App />\n        </Router>\n      </ThemeProvider>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","import { PartialTheme } from \"@fluentui/react\";\n\nexport const theme: PartialTheme = {\n  palette: {\n    themePrimary: \"#0f8387\",\n  },\n};\n"],"sourceRoot":""}