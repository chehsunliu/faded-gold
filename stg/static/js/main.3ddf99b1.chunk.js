(this["webpackJsonpfaded-gold"]=this["webpackJsonpfaded-gold"]||[]).push([[0],{127:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(38),c=n.n(r),l=n(184),o=n(25),s=n(183),d=n(6),u=n(189),b=n(2),j={root:{width:208,boxSizing:"border-box",border:"1px solid #eee"}},m=function(e){var t=e.routingItems,n=Object(d.g)(),a=Object(u.a)("translation",{keyPrefix:"menu"}).t,i=[{links:Object.entries(t).map((function(e){var t=Object(o.a)(e,2),n=t[0],i=t[1];return{name:a(n),url:i.url,key:n}}))}];return Object(b.jsx)(s.a,{selectedKey:"",groups:i,styles:j,onLinkClick:function(e,t){void 0!==e&&void 0!==t&&(e.preventDefault(),n(t.url))}})},f=n(13),x=n(187),h=function(e){return Object(b.jsx)(x.a,Object(f.a)(Object(f.a)({},e),{},{variant:"mega",block:!0}))},p=function(e){return Object(b.jsx)(x.a,Object(f.a)(Object(f.a)({},e),{},{variant:"xxLarge",block:!0}))},y=function(e){return Object(b.jsx)(x.a,Object(f.a)(Object(f.a)({},e),{},{variant:"xLarge",block:!0}))},g={childrenGap:10},O={root:{display:"block"}},w=function(e){var t=e.title,n=e.children;return Object(a.useEffect)((function(){document.title=t}),[t]),Object(b.jsxs)(l.a,{tokens:g,styles:O,children:[Object(b.jsx)(h,{children:t}),n]})},U=function(e){var t=e.routingItems,n=Object(u.a)("translation",{keyPrefix:"menu"}).t,a=[Object(b.jsx)(d.b,{path:"/",element:Object(b.jsx)(d.a,{to:"/games/swd3e"})},"home")],i=Object.entries(t).map((function(e){var t=Object(o.a)(e,2),a=t[0],i=t[1],r=Object(b.jsx)(w,{title:n(a),children:i.element()});return Object(b.jsx)(d.b,{path:i.url,element:r},a)}));return Object(b.jsx)(d.d,{children:a.concat(i)})};function v(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{children:"TBD"})})}var k=76286,V=76290,R=76292,C=76294,P=76296,S=76298,D=76300,A=76302,I=76304,L=76306,B=76330,F=76331,M=76332,z=76333,E=76334,G=function(e){return{money:e.getUint32(76030,!0),scene:e.getUint32(75994,!0),x:e.getUint32(75998,!0),y:e.getUint32(76002,!0)}},H=function(e,t){return{experience:e.getUint32(k+t,!0),health:e.getUint16(V+t,!0),mana:e.getUint16(R+t,!0),vitality:e.getUint16(C+t,!0),maxHealth:e.getUint16(P+t,!0),maxMana:e.getUint16(S+t,!0),maxVitality:e.getUint16(D+t,!0),strength:e.getUint16(A+t,!0),durability:e.getUint16(I+t,!0),intelligence:e.getUint16(L+t,!0),speed:e.getUint16(76308+t,!0),level:e.getUint8(B+t),metalResistance:e.getUint8(F+t),woodResistance:e.getUint8(M+t),waterResistance:e.getUint8(z+t),fireResistance:e.getUint8(E+t),earthResistance:e.getUint8(76335+t)}},N=function(e){return{chen:H(e,0),yu:H(e,60),tuoba:H(e,120),chang:H(e,180)}},T=function(e,t,n){e.setUint32(k+t,n.experience,!0),e.setUint16(V+t,n.health,!0),e.setUint16(R+t,n.mana,!0),e.setUint16(C+t,n.vitality,!0),e.setUint16(P+t,n.maxHealth,!0),e.setUint16(S+t,n.maxMana,!0),e.setUint16(D+t,n.maxVitality,!0),e.setUint16(A+t,n.strength,!0),e.setUint16(I+t,n.durability,!0),e.setUint16(L+t,n.intelligence,!0),e.setUint16(76308+t,n.speed,!0),e.setUint8(B+t,n.level),e.setUint8(F+t,n.metalResistance),e.setUint8(M+t,n.woodResistance),e.setUint8(z+t,n.waterResistance),e.setUint8(E+t,n.fireResistance),e.setUint8(76335+t,n.earthResistance)},J=function(e,t){var n=new DataView(e);!function(e,t){e.setUint32(76030,t.money,!0),e.setUint32(75994,t.scene,!0),e.setUint32(75998,t.x,!0),e.setUint32(76002,t.y,!0)}(n,t.game),function(e,t){T(e,0,t.chen),T(e,60,t.yu),T(e,120,t.tuoba),T(e,180,t.chang)}(n,t.party)},K=n(43),Q=function(){return Object(K.b)()},W=K.c,q=n(19),X=Object(q.b)({name:"swd3e/game",initialState:{money:0,scene:0,x:0,y:0},reducers:{replaced:function(e,t){return t.payload},moneyUpdated:function(e,t){e.money=t.payload},sceneUpdated:function(e,t){e.scene=t.payload},xUpdated:function(e,t){e.x=t.payload},yUpdated:function(e,t){e.y=t.payload}}}),Y=X.actions,Z=X.reducer,$=Object(q.b)({name:"swd3e/meta",initialState:{filename:null},reducers:{filenameUpdated:function(e,t){e.filename=t.payload}}}),_=$.actions,ee=$.reducer,te={durability:0,earthResistance:0,experience:0,fireResistance:0,health:0,intelligence:0,level:0,mana:0,maxHealth:0,maxMana:0,maxVitality:0,metalResistance:0,speed:0,strength:0,vitality:0,waterResistance:0,woodResistance:0},ne={chen:Object(f.a)({},te),yu:Object(f.a)({},te),tuoba:Object(f.a)({},te),chang:Object(f.a)({},te)},ae=Object(q.b)({name:"swd3e/party",initialState:ne,reducers:{replaced:function(e,t){return t.payload},attributeUpdated:function(e,t){var n=t.payload,a=n.id,i=n.attribute,r=n.value;e[a][i]=r}}}),ie=ae.actions,re=ae.reducer,ce=n(179),le=function(e){return function(t){if(null!==t.target.files){var n=t.target.files[0],a=new FileReader;a.onload=function(t){if(null!==t.target){var a=t.target.result;a instanceof ArrayBuffer?e.onUpload(n.name,a):console.error("buffer is not an instance of ArrayBuffer")}else console.error("ProgressEvent.target is null")},a.readAsArrayBuffer(n)}else console.error("event.target.files is null")}},oe=function(e){var t=Object(u.a)("translation",{keyPrefix:"commandBar"}).t,n=e.uploadDisabled,a=e.downloadDisabled,r=i.a.createRef(),c=[{key:"upload",text:t("upload"),iconProps:{iconName:"Upload"},disabled:n,onClick:function(){r.current&&r.current.click()}},{key:"upload-dummy",onRender:function(){return Object(b.jsx)("input",{ref:r,style:{display:"none"},type:"file",onChange:le(e)})}},{key:"download",text:t("download"),iconProps:{iconName:"Download"},disabled:a,onClick:e.onDownload}];return Object(b.jsx)(ce.a,{items:c})},se=n(181),de=function(e){var t=e.label,n=e.value,a=e.maxValue,i=e.onChange,r=e.width,c={fieldGroup:{width:void 0!==r?r:80}},l=function(e){e>=0&&e<=(void 0!==a?a:65535)&&i(e)};return Object(b.jsx)(se.a,{label:t,value:"".concat(n),onChange:function(e,t){if(void 0!==t)if(0!==t.length){var n=parseInt(t);isNaN(n)||l(n)}else l(0)},onKeyDown:function(e){"ArrowDown"===e.key?l(n-1):"ArrowUp"===e.key&&l(n+1)},styles:c})},ue={root:{width:600,padding:10}},be={childrenGap:10},je=function(){var e=Object(u.a)("swd3e",{keyPrefix:"game"}).t,t=Q(),n=W((function(e){return e.swd3e.game})),a=n.money,i=n.scene,r=n.x,c=n.y;return Object(b.jsxs)("div",{children:[Object(b.jsx)(p,{children:e("title")}),Object(b.jsxs)(l.a,{styles:ue,tokens:be,horizontal:!0,wrap:!0,children:[Object(b.jsx)("span",{children:Object(b.jsx)(de,{label:e("money"),value:a,maxValue:4294967295,width:100,onChange:function(e){t(Y.moneyUpdated(e))}})}),Object(b.jsx)("span",{children:Object(b.jsx)(de,{label:e("scene"),value:i,maxValue:4294967295,width:100,onChange:function(e){t(Y.sceneUpdated(e))}})}),Object(b.jsx)("span",{children:Object(b.jsx)(de,{label:"x",value:r,maxValue:4294967295,width:100,onChange:function(e){t(Y.xUpdated(e))}})}),Object(b.jsx)("span",{children:Object(b.jsx)(de,{label:"y",value:c,maxValue:4294967295,width:100,onChange:function(e){t(Y.yUpdated(e))}})})]})]})},me=n(54),fe=function(e){var t=Object(me.a)().palette,n=Object(a.useState)(!1),i=Object(o.a)(n,2),r=i[0],c=i[1],l={width:e.width,padding:"20px",borderWidth:"2px",borderStyle:"solid",borderColor:r?t.themePrimary:t.neutralQuaternary};return Object(b.jsx)("div",{onMouseEnter:function(){c(!0)},onMouseLeave:function(){c(!1)},style:l,children:e.children})},xe={childrenGap:5},he=function(e){var t=e.id,n=Object(u.a)("swd3e",{keyPrefix:"party"}).t,a=W((function(e){return e.swd3e.party[t]})),i=Q(),r=[{attr:"level",maxValue:255,width:60},{attr:"experience",maxValue:4294967295,width:95},{attr:"health",maxValue:65535},{attr:"maxHealth",maxValue:65535},{attr:"mana",maxValue:65535},{attr:"maxMana",maxValue:65535},{attr:"vitality",maxValue:65535},{attr:"maxVitality",maxValue:65535},{attr:"strength",maxValue:65535},{attr:"durability",maxValue:65535},{attr:"intelligence",maxValue:65535},{attr:"speed",maxValue:65535},{attr:"metalResistance",maxValue:255,width:65},{attr:"woodResistance",maxValue:255,width:65},{attr:"waterResistance",maxValue:255,width:65},{attr:"fireResistance",maxValue:255,width:65},{attr:"earthResistance",maxValue:255,width:65}].map((function(e){return Object(b.jsx)(de,{label:n("states.".concat(e.attr)),value:a[e.attr],maxValue:e.maxValue,width:e.width,onChange:function(n){i(ie.attributeUpdated({id:t,attribute:e.attr,value:n}))}},e.attr)}));return Object(b.jsxs)(fe,{width:350,children:[Object(b.jsx)(y,{children:n("names.".concat(t))}),Object(b.jsx)(l.a,{tokens:xe,horizontalAlign:"center",horizontal:!0,wrap:!0,children:r})]})},pe={childrenGap:16},ye=function(){var e=Object(u.a)("swd3e",{keyPrefix:"party"}).t,t=W((function(e){return e.swd3e})).party,n=Object.keys(t).map((function(e){return Object(b.jsx)(he,{id:e},e)}));return Object(b.jsxs)("div",{children:[Object(b.jsx)(p,{children:e("title")}),Object(b.jsx)(l.a,{tokens:pe,horizontal:!0,wrap:!0,children:n})]})},ge="swd3e/save",Oe=function(){var e=Q(),t=W((function(e){return e.swd3e.meta})).filename,n=W((function(e){return e.swd3e})),a=n.game,i=n.party;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(oe,{onUpload:function(t,n){var a=function(e){var t=new DataView(e);return{game:G(t),party:N(t)}}(n),i=function(e){return btoa(new Uint8Array(e).reduce((function(e,t){return e+String.fromCharCode(t)}),""))}(n);localStorage.setItem(ge,i),e(_.filenameUpdated(t)),e(Y.replaced(a.game)),e(ie.replaced(a.party))},onDownload:function(){if(null!==t){var e=localStorage.getItem(ge);if(null!==e){var n=function(e){return Uint8Array.from(atob(e).split("").map((function(e){return e.charCodeAt(0)}))).buffer}(e);null===n&&console.error("buffer is null"),J(n,{game:a,party:i});var r=new Blob([new Uint8Array(n)]),c=URL.createObjectURL(r),l=document.createElement("a");l.href=c,l.download=t,l.click()}else console.error("b64 blob is null")}},downloadDisabled:null===t}),Object(b.jsx)(je,{}),Object(b.jsx)(ye,{})]})},we={swde:{url:"/games/swde",element:function(){return Object(b.jsx)(v,{})}},swd3e:{url:"/games/swd3e",element:function(){return Object(b.jsx)(Oe,{})}}},Ue={root:{padding:10}},ve={root:{padding:10}};var ke=function(){return Object(b.jsx)(a.Suspense,{fallback:Object(b.jsx)("div",{children:"Loading"}),children:Object(b.jsxs)(l.a,{horizontal:!0,children:[Object(b.jsx)(l.a.Item,{styles:Ue,children:Object(b.jsx)(m,{routingItems:we})}),Object(b.jsx)(l.a.Item,{styles:ve,children:Object(b.jsx)(U,{routingItems:we})})]})})},Ve=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,195)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),i(e),r(e),c(e)}))},Re=n(178),Ce=n(46),Pe=n(76),Se=n(44),De=n(95);Pe.a.use(De.a).use(Se.e).init({fallbackLng:"tw",debug:!0,interpolation:{escapeValue:!1},backend:{loadPath:"".concat(".","/locales/{{lng}}/{{ns}}.json")}}).then((function(e){return console.debug("Finished i18n initialization")}));Pe.a;var Ae=n(30),Ie=Object(q.b)({name:"swde/game",initialState:{money:0},reducers:{moneyUpdated:function(e,t){e.money=t.payload}}}),Le=(Ie.actions.moneyUpdated,Ie.reducer),Be={experience:0,health:0,mana:0,maxHealth:0,maxMana:0,maxVitality:0,vitality:0},Fe={fu:Object(f.a)({},Be),wenjin:Object(f.a)({},Be),puppet:Object(f.a)({},Be),stone:Object(f.a)({},Be)},Me=Object(q.b)({name:"swde/party",initialState:Fe,reducers:{attributeUpdated:function(e,t){var n=t.payload,a=n.id,i=n.attribute,r=n.value;e[a][i]=r}}}),ze=(Me.actions.attributeUpdated,Me.reducer),Ee=Object(Ae.b)({game:Le,party:ze}),Ge=Object(Ae.b)({game:Z,meta:ee,party:re}),He=Object(q.a)({reducer:{swde:Ee,swd3e:Ge}}),Ne=n(182);Object(Re.a)(),c.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(K.a,{store:He,children:Object(b.jsx)(Ne.a,{theme:{palette:{themePrimary:"#0f8387"}},children:Object(b.jsx)(Ce.a,{children:Object(b.jsx)(ke,{})})})})}),document.getElementById("root")),Ve()}},[[127,1,2]]]);
//# sourceMappingURL=main.3ddf99b1.chunk.js.map