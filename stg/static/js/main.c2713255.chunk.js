(this["webpackJsonpfaded-gold"]=this["webpackJsonpfaded-gold"]||[]).push([[0],{127:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(38),c=n.n(i),l=n(184),o=n(25),s=n(183),u=n(6),d=n(189),b=n(3),j={root:{width:208,boxSizing:"border-box",border:"1px solid #eee"}},m=function(e){var t=e.routingItems,n=Object(u.g)(),a=Object(d.a)("translation",{keyPrefix:"menu"}).t,r=[{links:Object.entries(t).map((function(e){var t=Object(o.a)(e,2),n=t[0],r=t[1];return{name:a(n),url:r.url,key:n}}))}];return Object(b.jsx)(s.a,{selectedKey:"",groups:r,styles:j,onLinkClick:function(e,t){void 0!==e&&void 0!==t&&(e.preventDefault(),n(t.url))}})},f=n(13),h=n(187),x=function(e){return Object(b.jsx)(h.a,Object(f.a)(Object(f.a)({},e),{},{variant:"mega",block:!0}))},p=function(e){return Object(b.jsx)(h.a,Object(f.a)(Object(f.a)({},e),{},{variant:"xxLarge",block:!0}))},g=function(e){return Object(b.jsx)(h.a,Object(f.a)(Object(f.a)({},e),{},{variant:"xLarge",block:!0}))},O={childrenGap:10},y={root:{display:"block"}},w=function(e){var t=e.title,n=e.children;return Object(a.useEffect)((function(){document.title=t}),[t]),Object(b.jsxs)(l.a,{tokens:O,styles:y,children:[Object(b.jsx)(x,{children:t}),n]})},v=function(e){var t=e.routingItems,n=Object(d.a)("translation",{keyPrefix:"menu"}).t,a=[Object(b.jsx)(u.b,{path:"/",element:Object(b.jsx)(u.a,{to:"/games/swd3e"})},"home")],r=Object.entries(t).map((function(e){var t=Object(o.a)(e,2),a=t[0],r=t[1],i=Object(b.jsx)(w,{title:n(a),children:r.element()});return Object(b.jsx)(u.b,{path:r.url,element:i},a)}));return Object(b.jsx)(u.d,{children:a.concat(r)})};function U(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)("div",{children:"TBD"})})}var k=76286,V=76290,R=76292,C=76294,P=76296,S=76298,D=76300,A=76302,I=76304,L=76306,B=76330,F=76331,M=76332,z=76333,E=76334,H=function(e){return{money:e.getUint32(76030,!0)}},G=function(e,t){return{experience:e.getUint32(k+t,!0),health:e.getUint16(V+t,!0),mana:e.getUint16(R+t,!0),vitality:e.getUint16(C+t,!0),maxHealth:e.getUint16(P+t,!0),maxMana:e.getUint16(S+t,!0),maxVitality:e.getUint16(D+t,!0),strength:e.getUint16(A+t,!0),durability:e.getUint16(I+t,!0),intelligence:e.getUint16(L+t,!0),speed:e.getUint16(76308+t,!0),level:e.getUint8(B+t),metalResistance:e.getUint8(F+t),woodResistance:e.getUint8(M+t),waterResistance:e.getUint8(z+t),fireResistance:e.getUint8(E+t),earthResistance:e.getUint8(76335+t)}},N=function(e){return{chen:G(e,0),yu:G(e,60),tuoba:G(e,120),chang:G(e,180)}},T=function(e,t,n){e.setUint32(k+t,n.experience,!0),e.setUint16(V+t,n.health,!0),e.setUint16(R+t,n.mana,!0),e.setUint16(C+t,n.vitality,!0),e.setUint16(P+t,n.maxHealth,!0),e.setUint16(S+t,n.maxMana,!0),e.setUint16(D+t,n.maxVitality,!0),e.setUint16(A+t,n.strength,!0),e.setUint16(I+t,n.durability,!0),e.setUint16(L+t,n.intelligence,!0),e.setUint16(76308+t,n.speed,!0),e.setUint8(B+t,n.level),e.setUint8(F+t,n.metalResistance),e.setUint8(M+t,n.woodResistance),e.setUint8(z+t,n.waterResistance),e.setUint8(E+t,n.fireResistance),e.setUint8(76335+t,n.earthResistance)},J=function(e,t){var n=new DataView(e);!function(e,t){e.setUint32(76030,t.money,!0)}(n,t.game),function(e,t){T(e,0,t.chen),T(e,60,t.yu),T(e,120,t.tuoba),T(e,180,t.chang)}(n,t.party)},K=n(43),Q=function(){return Object(K.b)()},W=K.c,q=n(19),X=Object(q.b)({name:"swd3e/game",initialState:{money:0},reducers:{replaced:function(e,t){return t.payload},moneyUpdated:function(e,t){e.money=t.payload}}}),Y=X.actions,Z=X.reducer,$=Object(q.b)({name:"swd3e/meta",initialState:{filename:null},reducers:{filenameUpdated:function(e,t){e.filename=t.payload}}}),_=$.actions,ee=$.reducer,te={durability:0,earthResistance:0,experience:0,fireResistance:0,health:0,intelligence:0,level:0,mana:0,maxHealth:0,maxMana:0,maxVitality:0,metalResistance:0,speed:0,strength:0,vitality:0,waterResistance:0,woodResistance:0},ne={chen:Object(f.a)({},te),yu:Object(f.a)({},te),tuoba:Object(f.a)({},te),chang:Object(f.a)({},te)},ae=Object(q.b)({name:"swd3e/party",initialState:ne,reducers:{replaced:function(e,t){return t.payload},attributeUpdated:function(e,t){var n=t.payload,a=n.id,r=n.attribute,i=n.value;e[a][r]=i}}}),re=ae.actions,ie=ae.reducer,ce=n(179),le=function(e){return function(t){if(null!==t.target.files){var n=t.target.files[0],a=new FileReader;a.onload=function(t){if(null!==t.target){var a=t.target.result;a instanceof ArrayBuffer?e.onUpload(n.name,a):console.error("buffer is not an instance of ArrayBuffer")}else console.error("ProgressEvent.target is null")},a.readAsArrayBuffer(n)}else console.error("event.target.files is null")}},oe=function(e){var t=Object(d.a)("translation",{keyPrefix:"commandBar"}).t,n=e.uploadDisabled,a=e.downloadDisabled,i=r.a.createRef(),c=[{key:"upload",text:t("upload"),iconProps:{iconName:"Upload"},disabled:n,onClick:function(){i.current&&i.current.click()}},{key:"upload-dummy",onRender:function(){return Object(b.jsx)("input",{ref:i,style:{display:"none"},type:"file",onChange:le(e)})}},{key:"download",text:t("download"),iconProps:{iconName:"Download"},disabled:a,onClick:e.onDownload}];return Object(b.jsx)(ce.a,{items:c})},se=n(181),ue=function(e){var t=e.label,n=e.value,a=e.maxValue,r=e.onChange,i=e.width,c={fieldGroup:{width:void 0!==i?i:80}},l=function(e){e>=0&&e<=(void 0!==a?a:65535)&&r(e)};return Object(b.jsx)(se.a,{label:t,value:"".concat(n),onChange:function(e,t){if(void 0!==t)if(0!==t.length){var n=parseInt(t);isNaN(n)||l(n)}else l(0)},onKeyDown:function(e){"ArrowDown"===e.key?l(n-1):"ArrowUp"===e.key&&l(n+1)},styles:c})},de=function(){var e=Object(d.a)("swd3e",{keyPrefix:"game"}).t,t=Q(),n=W((function(e){return e.swd3e.game})).money;return Object(b.jsxs)("div",{children:[Object(b.jsx)(p,{children:e("title")}),Object(b.jsx)(ue,{label:e("money"),value:n,maxValue:4294967295,width:100,onChange:function(e){t(Y.moneyUpdated(e))}})]})},be=n(54),je=function(e){var t=Object(be.a)().palette,n=Object(a.useState)(!1),r=Object(o.a)(n,2),i=r[0],c=r[1],l={width:e.width,padding:"20px",borderWidth:"2px",borderStyle:"solid",borderColor:i?t.themePrimary:t.neutralQuaternary};return Object(b.jsx)("div",{onMouseEnter:function(){c(!0)},onMouseLeave:function(){c(!1)},style:l,children:e.children})},me={childrenGap:5},fe=function(e){var t=e.id,n=Object(d.a)("swd3e",{keyPrefix:"party"}).t,a=W((function(e){return e.swd3e.party[t]})),r=Q(),i=[{attr:"level",maxValue:255,width:60},{attr:"experience",maxValue:4294967295,width:95},{attr:"health",maxValue:65535},{attr:"maxHealth",maxValue:65535},{attr:"mana",maxValue:65535},{attr:"maxMana",maxValue:65535},{attr:"vitality",maxValue:65535},{attr:"maxVitality",maxValue:65535},{attr:"strength",maxValue:65535},{attr:"durability",maxValue:65535},{attr:"intelligence",maxValue:65535},{attr:"speed",maxValue:65535},{attr:"metalResistance",maxValue:255,width:65},{attr:"woodResistance",maxValue:255,width:65},{attr:"waterResistance",maxValue:255,width:65},{attr:"fireResistance",maxValue:255,width:65},{attr:"earthResistance",maxValue:255,width:65}].map((function(e){return Object(b.jsx)(ue,{label:n("states.".concat(e.attr)),value:a[e.attr],maxValue:e.maxValue,width:e.width,onChange:function(n){r(re.attributeUpdated({id:t,attribute:e.attr,value:n}))}},e.attr)}));return Object(b.jsxs)(je,{width:350,children:[Object(b.jsx)(g,{children:n("names.".concat(t))}),Object(b.jsx)(l.a,{tokens:me,horizontalAlign:"center",horizontal:!0,wrap:!0,children:i})]})},he={childrenGap:16},xe=function(){var e=Object(d.a)("swd3e",{keyPrefix:"party"}).t,t=W((function(e){return e.swd3e})).party,n=Object.keys(t).map((function(e){return Object(b.jsx)(fe,{id:e},e)}));return Object(b.jsxs)("div",{children:[Object(b.jsx)(p,{children:e("title")}),Object(b.jsx)(l.a,{tokens:he,horizontal:!0,wrap:!0,children:n})]})},pe="swd3e/save",ge=function(){var e=Q(),t=W((function(e){return e.swd3e.meta})).filename,n=W((function(e){return e.swd3e})),a=n.game,r=n.party;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(oe,{onUpload:function(t,n){var a=function(e){var t=new DataView(e);return{game:H(t),party:N(t)}}(n),r=function(e){return btoa(new Uint8Array(e).reduce((function(e,t){return e+String.fromCharCode(t)}),""))}(n);localStorage.setItem(pe,r),e(_.filenameUpdated(t)),e(Y.replaced(a.game)),e(re.replaced(a.party))},onDownload:function(){if(null!==t){var e=localStorage.getItem(pe);if(null!==e){var n=function(e){return Uint8Array.from(atob(e).split("").map((function(e){return e.charCodeAt(0)}))).buffer}(e);null===n&&console.error("buffer is null"),J(n,{game:a,party:r});var i=new Blob([new Uint8Array(n)]),c=URL.createObjectURL(i),l=document.createElement("a");l.href=c,l.download=t,l.click()}else console.error("b64 blob is null")}},downloadDisabled:null===t}),Object(b.jsx)(de,{}),Object(b.jsx)(xe,{})]})},Oe={swde:{url:"/games/swde",element:function(){return Object(b.jsx)(U,{})}},swd3e:{url:"/games/swd3e",element:function(){return Object(b.jsx)(ge,{})}}},ye={root:{padding:10}},we={root:{padding:10}};var ve=function(){return Object(b.jsx)(a.Suspense,{fallback:Object(b.jsx)("div",{children:"Loading"}),children:Object(b.jsxs)(l.a,{horizontal:!0,children:[Object(b.jsx)(l.a.Item,{styles:ye,children:Object(b.jsx)(m,{routingItems:Oe})}),Object(b.jsx)(l.a.Item,{styles:we,children:Object(b.jsx)(v,{routingItems:Oe})})]})})},Ue=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,195)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))},ke=n(178),Ve=n(46),Re=n(76),Ce=n(44),Pe=n(95);Re.a.use(Pe.a).use(Ce.e).init({fallbackLng:"tw",debug:!0,interpolation:{escapeValue:!1},backend:{loadPath:"".concat(".","/locales/{{lng}}/{{ns}}.json")}}).then((function(e){return console.debug("Finished i18n initialization")}));Re.a;var Se=n(29),De=Object(q.b)({name:"swde/game",initialState:{money:0},reducers:{moneyUpdated:function(e,t){e.money=t.payload}}}),Ae=(De.actions.moneyUpdated,De.reducer),Ie={experience:0,health:0,mana:0,maxHealth:0,maxMana:0,maxVitality:0,vitality:0},Le={fu:Object(f.a)({},Ie),wenjin:Object(f.a)({},Ie),puppet:Object(f.a)({},Ie),stone:Object(f.a)({},Ie)},Be=Object(q.b)({name:"swde/party",initialState:Le,reducers:{attributeUpdated:function(e,t){var n=t.payload,a=n.id,r=n.attribute,i=n.value;e[a][r]=i}}}),Fe=(Be.actions.attributeUpdated,Be.reducer),Me=Object(Se.b)({game:Ae,party:Fe}),ze=Object(Se.b)({game:Z,meta:ee,party:ie}),Ee=Object(q.a)({reducer:{swde:Me,swd3e:ze}}),He=n(182);Object(ke.a)(),c.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(K.a,{store:Ee,children:Object(b.jsx)(He.a,{theme:{palette:{themePrimary:"#0f8387"}},children:Object(b.jsx)(Ve.a,{children:Object(b.jsx)(ve,{})})})})}),document.getElementById("root")),Ue()}},[[127,1,2]]]);
//# sourceMappingURL=main.c2713255.chunk.js.map